---
date: 2025-12-18
tags: [opencode, commit, messages, automation]
title: Automatically generate commit messages with OpenCode
---

AI is _fine_ for vibe-coding, but I prefer to introduce my own "checkpoints" via commits.

I like to make a working, logical "chunk" of changes, and commit that atomic unit.

When Claude Code automatically generates commits, it's basically per-prompt.
But with all of the back-and-forth, I'd need to rebase or squash them.

## `prepare-commit-msg`

Git has [several hooks available](https://git-scm.com/book/ms/v2/Customizing-Git-Git-Hooks).

When you run `git commit` **WITHOUT** a message, I'm using `prepare-commit-msg` hook to generate one for your using [opencode](https://opencode.com/).

```shell
$ git commit
ðŸ¤– Generating default commit message (model: opencode/grok-code)â€¦
```

Then, your default `$EDITOR` opens per usual with a message you can customize:

```md
Update opencode permission key from edit to write

- Change "edit" to "write" in the OPENCODE_PERMISSION_JSON
- Ensures consistency with updated permission naming

ðŸ¤– Generated by opencode/grok-code
```

Finally, your `git commit` completes as usual:

```shell
$ git commit
ðŸ¤– Generating default commit message (model: opencode/grok-code)â€¦
[eric 7c280ef] Update opencode permission key from edit to write
 1 file changed, 1 insertion(+), 1 deletion(-)
```

## Installation

With [husky](https://typicode.github.io/husky/) in your project, create `.husky/prepare-commit-msg` with the following content:

<div className="not-prose">
  <script src="https://gist.github.com/ericclemmons/2a23cc0595c7570fd08f4fa2d3ddef48.js"></script>
</div>
